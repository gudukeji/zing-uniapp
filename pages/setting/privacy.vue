<template>
  <view class="container">
    <view class="title-box">
      <view>éšç§ä¸æ˜¾ç¤ºè®¾ç½® ğŸ”ï¸</view>
    </view>
    
    <view class="table">éšç§è®¾ç½®</view>
    <view class="list-box">
      <view class="list df">
        <image class="icon" src="/static/img/setting/101.png"></image>
        <view class="list-item df bb1">
          <view class="title">
            <view class="t1">å…è®¸åˆ«äººæŸ¥çœ‹æˆ‘çš„ç²‰ä¸</view>
            <view class="t2">ä»–äººæ˜¯å¦å¯ä»¥æŸ¥çœ‹æˆ‘çš„ç²‰ä¸åˆ—è¡¨</view>
          </view>
          <switch :checked="!!privacySettings.showFans" @change="switchPrivacy('showFans')" color="#000" style="transform:scale(0.8)"/>
        </view>
      </view>
      
      <view class="list df">
        <image class="icon" src="/static/img/setting/102.png"></image>
        <view class="list-item df bb1">
          <view class="title">
            <view class="t1">å…è®¸åˆ«äººæŸ¥çœ‹æˆ‘çš„å…³æ³¨</view>
            <view class="t2">ä»–äººæ˜¯å¦å¯ä»¥æŸ¥çœ‹æˆ‘çš„å…³æ³¨åˆ—è¡¨</view>
          </view>
          <switch :checked="!!privacySettings.showFollows" @change="switchPrivacy('showFollows')" color="#000" style="transform:scale(0.8)"/>
        </view>
      </view>

      <view class="list df">
        <image class="icon" src="/static/img/setting/103.png"></image>
        <view class="list-item df bb1">
          <view class="title">
            <view class="t1">å…è®¸åˆ«äººæŸ¥çœ‹æˆ‘çš„è®¿å®¢</view>
            <view class="t2">ä»–äººæ˜¯å¦å¯ä»¥æŸ¥çœ‹è°è®¿é—®è¿‡æˆ‘çš„ä¸»é¡µ</view>
          </view>
          <switch :checked="!!privacySettings.showVisitors" @change="switchPrivacy('showVisitors')" color="#000" style="transform:scale(0.8)"/>
        </view>
      </view>

      <view class="list df">
        <image class="icon" src="/static/img/setting/104.png"></image>
        <view class="list-item df">
          <view class="title">
            <view class="t1">å…è®¸è¢«æœç´¢åˆ°</view>
            <view class="t2">æ˜¯å¦å…è®¸å…¶ä»–ç”¨æˆ·é€šè¿‡æœç´¢æ‰¾åˆ°æˆ‘</view>
          </view>
          <switch :checked="!!privacySettings.allowSearch" @change="switchPrivacy('allowSearch')" color="#000" style="transform:scale(0.8)"/>
        </view>
      </view>
    </view>
    
    <view class="table">ç€‘å¸ƒæµè®¾ç½®</view>
    <view class="list-box">
      <view class="list df">
        <image class="icon" src="/static/img/setting/201.png"></image>
        <view class="list-item df bb1">
          <view class="title">
            <view class="t1">åŠ¨æ€ç€‘å¸ƒæµ</view>
            <view class="t2">é¦–é¡µæ˜¯å¦æ˜¾ç¤ºåŠ¨æ€ç€‘å¸ƒæµ</view>
          </view>
          <switch :checked="!!flowSettings.dynamicFlow" @change="switchFlow('dynamicFlow')" color="#000" style="transform:scale(0.8)"/>
        </view>
      </view>

      <view class="list df">
        <image class="icon" src="/static/img/setting/202.png"></image>
        <view class="list-item df">
          <view class="title">
            <view class="t1">åœˆå­ç€‘å¸ƒæµ</view>
            <view class="t2">åœˆå­é¡µé¢æ˜¯å¦æ˜¾ç¤ºç€‘å¸ƒæµå¸ƒå±€</view>
          </view>
          <switch :checked="!!flowSettings.circleFlow" @change="switchFlow('circleFlow')" color="#000" style="transform:scale(0.8)"/>
        </view>
      </view>
    </view>
    
    <view class="description-box">
      <view class="description-title">å…³äºç€‘å¸ƒæµå¸ƒå±€</view>
      <view class="description-content">
        ç€‘å¸ƒæµå¸ƒå±€æ˜¯ä¸€ç§å¤šåˆ—å¸ƒå±€ï¼Œå†…å®¹æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„é¡ºåºè¿›è¡Œæ’åˆ—ã€‚å®ƒèƒ½å¤Ÿæ›´å¥½åœ°å±•ç¤ºå›¾ç‰‡å†…å®¹ï¼Œæé«˜æµè§ˆæ•ˆç‡ï¼Œä½†ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„æµé‡ã€‚
      </view>
    </view>
       <!-- #ifdef MP -->   
    <view class="table">å…¶ä»–</view>
    <view class="list-box">
      <button class="list df" open-type="openSetting">
        <image class="icon" src="/static/img/setting/105.png"></image>
        <view class="list-item df bb1">
          <view class="title">
            <view class="t1">ç³»ç»Ÿæƒé™</view>
          </view>
          <image src="/static/img/x.png"></image>
        </view>
      </button>
    </view>
          <!-- #endif -->
    
    <uni-popup ref="tipsPopup" type="top" :mask-background-color="'rgba(0, 0, 0, 0)'">
      <view class="tips-box df">
        <view class="tips-item">{{uiState.tipsTitle}}</view>
      </view>
    </uni-popup>
  </view>
</template>

<script setup>
import { ref, reactive, onMounted, onUnmounted, computed } from 'vue'
import { useStore } from 'vuex'
import navbar from '@/components/navbar/navbar.vue'
import { updatePrivacySettings, updateFlowSettings } from '@/api/social.js'

// uni-popup é€šè¿‡ easycom è‡ªåŠ¨å¯¼å…¥ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥

// è·å– store å®ä¾‹
const store = useStore()

// å“åº”å¼æ•°æ®
const statusBarHeight = computed(() => store.state.statusBarHeight || 20)
const titleBarHeight = computed(() => store.state.titleBarHeight || 44)

const privacySettings = reactive({
  showFans: 1,
  showFollows: 1,
  showVisitors: 1,
  allowSearch: 1,
  showPhone: 1
})

const flowSettings = reactive({
  dynamicFlow: true,
  circleFlow: true
})

// UIçŠ¶æ€ç®¡ç†
const uiState = reactive({
  tipsTitle: "",
  privacyLoading: false,
  flowLoading: false
})

// å¼¹çª—å¼•ç”¨
const tipsPopup = ref(null)

// é˜²æŠ–å®šæ—¶å™¨
const debounceTimers = reactive({
  privacy: null,
  flow: null
})

// é˜²æŠ–å¤„ç†æ–¹æ³•
const debounce = (func, delay = 300, timerKey = 'default') => {
  if (debounceTimers[timerKey]) {
    clearTimeout(debounceTimers[timerKey])
  }

  debounceTimers[timerKey] = setTimeout(() => {
    func()
    debounceTimers[timerKey] = null
  }, delay)
}

// ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ–¹æ³•
const handleError = (error, context = 'æ“ä½œ') => {
  console.error(`${context}å¤±è´¥:`, error)

  let message = `${context}å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•`
  if (error.message) {
    message = error.message
  } else if (error.msg) {
    message = error.msg
  }

  showTip(message)
}

// æ˜¾ç¤ºæç¤ºä¿¡æ¯
const showTip = (msg) => {
  uiState.tipsTitle = msg
  tipsPopup.value.open()

  setTimeout(() => {
    tipsPopup.value.close()
  }, 2000)
}

// ä¼˜åŒ–çš„ç¼“å­˜è§£ææ–¹æ³•
const getUserInfoFromCache = () => {
  try {
    let userInfo = uni.getStorageSync('USER_INFO') || {}

    // å¦‚æœç¼“å­˜è¿”å›å­—ç¬¦ä¸²ï¼Œå…ˆè§£æå®ƒ
    if (typeof userInfo === 'string') {
      userInfo = JSON.parse(userInfo)
    }

    // ç¡®ä¿è¿”å›çš„æ˜¯å¯¹è±¡
    return typeof userInfo === 'object' && userInfo !== null ? userInfo : {}
  } catch (e) {
    console.error('è§£æUSER_INFOç¼“å­˜å¤±è´¥:', e)
    return {}
  }
}

// å®‰å…¨çš„JSONè§£ææ–¹æ³•
const safeJsonParse = (data, defaultValue = {}) => {
  try {
    if (typeof data === 'string') {
      return JSON.parse(data)
    } else if (typeof data === 'object' && data !== null) {
      return data
    }
    return defaultValue
  } catch (e) {
    console.error('JSONè§£æå¤±è´¥:', e)
    return defaultValue
  }
}

// ä»æœ¬åœ°ç¼“å­˜åŠ è½½é…ç½® - ä¼˜å…ˆä½¿ç”¨æ–°å­—æ®µæ ¼å¼
const loadFromCache = () => {
  try {
    // è·å–æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯
    const userInfo = getUserInfoFromCache()
    console.log('ä»ç¼“å­˜åŠ è½½ç”¨æˆ·ä¿¡æ¯:', userInfo)

    // ä¼˜å…ˆä»æ–°å­—æ®µæ ¼å¼è¯»å–éšç§è®¾ç½®
    if (userInfo.show_fans !== undefined || userInfo.show_follows !== undefined) {
      // ä½¿ç”¨æ–°çš„å­—æ®µæ ¼å¼ï¼Œç¡®ä¿è½¬æ¢ä¸ºæ•´å‹
      privacySettings.showFans = parseInt(userInfo.show_fans) || 1
      privacySettings.showFollows = parseInt(userInfo.show_follows) || 1
      privacySettings.showVisitors = parseInt(userInfo.show_visitors) || 1
      privacySettings.allowSearch = parseInt(userInfo.allow_search) || 1
      privacySettings.showPhone = parseInt(userInfo.show_phone) || 1

      console.log('ä»æ–°å­—æ®µæ ¼å¼åŠ è½½éšç§è®¾ç½®:', privacySettings)
    } else if (userInfo.privacy_settings) {
      // å…¼å®¹æ—§çš„JSONæ ¼å¼
      const cachedPrivacySettings = safeJsonParse(userInfo.privacy_settings, {})
      if (Object.keys(cachedPrivacySettings).length > 0) {
        // ç¡®ä¿è½¬æ¢ä¸ºæ•´å‹
        privacySettings.showFans = parseInt(cachedPrivacySettings.showFans) || 1
        privacySettings.showFollows = parseInt(cachedPrivacySettings.showFollows) || 1
        privacySettings.showVisitors = parseInt(cachedPrivacySettings.showVisitors) || 1
        privacySettings.allowSearch = parseInt(cachedPrivacySettings.allowSearch) || 1
        privacySettings.showPhone = parseInt(cachedPrivacySettings.showPhone) || 1
        console.log('ä»æ—§æ ¼å¼åŠ è½½éšç§è®¾ç½®:', privacySettings)
      }
    } else {
      console.log('ç¼“å­˜ä¸­æ²¡æœ‰éšç§è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼')
    }

    // ä¼˜å…ˆä»æ–°å­—æ®µæ ¼å¼è¯»å–ç€‘å¸ƒæµè®¾ç½®
    if (userInfo.dynamic_flow !== undefined || userInfo.circle_flow !== undefined) {
      // ä½¿ç”¨æ–°çš„å­—æ®µæ ¼å¼ï¼Œè½¬æ¢ä¸ºå‰ç«¯ä½¿ç”¨çš„å¸ƒå°”å€¼
      flowSettings.dynamicFlow = userInfo.dynamic_flow === 1
      flowSettings.circleFlow = userInfo.circle_flow === 1

      console.log('ä»æ–°å­—æ®µæ ¼å¼åŠ è½½ç€‘å¸ƒæµè®¾ç½®:', flowSettings)
    } else if (userInfo.flow_settings) {
      // å…¼å®¹æ—§çš„JSONæ ¼å¼
      const cachedFlowSettings = safeJsonParse(userInfo.flow_settings, {})
      if (Object.keys(cachedFlowSettings).length > 0) {
        const normalizedSettings = {
          dynamicFlow: Boolean(cachedFlowSettings.dynamicFlow),
          circleFlow: Boolean(cachedFlowSettings.circleFlow)
        }
        Object.assign(flowSettings, normalizedSettings)
        console.log('ä»æ—§æ ¼å¼åŠ è½½ç€‘å¸ƒæµè®¾ç½®:', flowSettings)
      }
    } else {
      console.log('ç¼“å­˜ä¸­æ²¡æœ‰ç€‘å¸ƒæµè®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼:', flowSettings)
    }
  } catch (e) {
    console.error('ä»ç¼“å­˜åŠ è½½é…ç½®å‡ºé”™:', e)
  }
}

// æ›´æ–°æœ¬åœ°ç¼“å­˜æ–¹æ³• - æ”¯æŒæ–°çš„å­—æ®µæ ¼å¼
const updateLocalCache = (settingType, data) => {
  try {
    // å…ˆè·å–å½“å‰ç¼“å­˜
    const userInfo = getUserInfoFromCache()
    console.log(`æ›´æ–°${settingType}ç¼“å­˜`)

    if (settingType === 'privacy_settings') {
      // æ›´æ–°éšç§è®¾ç½®çš„æ–°å­—æ®µæ ¼å¼ï¼Œç¡®ä¿è½¬æ¢ä¸ºæ•´å‹
      userInfo.show_fans = parseInt(data.showFans) || 0
      userInfo.show_follows = parseInt(data.showFollows) || 0
      userInfo.show_visitors = parseInt(data.showVisitors) || 0
      userInfo.allow_search = parseInt(data.allowSearch) || 0
      userInfo.show_phone = parseInt(data.showPhone) || 0

      // ä¿æŒæ—§æ ¼å¼å…¼å®¹ï¼ˆå¯é€‰ï¼‰
      userInfo.privacy_settings = data

      console.log('æ›´æ–°éšç§è®¾ç½®å­—æ®µ:', {
        show_fans: userInfo.show_fans,
        show_follows: userInfo.show_follows,
        show_visitors: userInfo.show_visitors,
        allow_search: userInfo.allow_search,
        show_phone: userInfo.show_phone
      })
    } else if (settingType === 'flow_settings') {
      // æ›´æ–°ç€‘å¸ƒæµè®¾ç½®çš„æ–°å­—æ®µæ ¼å¼ï¼Œç¡®ä¿è½¬æ¢ä¸ºæ•´å‹
      userInfo.dynamic_flow = data.dynamicFlow ? 1 : 0
      userInfo.circle_flow = data.circleFlow ? 1 : 0

      // ä¿æŒæ—§æ ¼å¼å…¼å®¹ï¼ˆå¯é€‰ï¼‰
      userInfo.flow_settings = {
        dynamicFlow: Boolean(data.dynamicFlow),
        circleFlow: Boolean(data.circleFlow)
      }

      console.log('æ›´æ–°ç€‘å¸ƒæµè®¾ç½®å­—æ®µ:', {
        dynamic_flow: userInfo.dynamic_flow,
        circle_flow: userInfo.circle_flow
      })
    }

    // ä¿å­˜å›ç¼“å­˜
    uni.setStorageSync('USER_INFO', userInfo)
    console.log(`${settingType}ç¼“å­˜æ›´æ–°å®Œæˆ`)

    // é€šçŸ¥å…¶ä»–é¡µé¢ç”¨æˆ·ä¿¡æ¯å·²æ›´æ–°
    uni.$emit('userInfoUpdated', {
      type: settingType,
      data: userInfo
    })

    // è§¦å‘ç€‘å¸ƒæµè®¾ç½®æ›´æ–°äº‹ä»¶
    if (settingType === 'flow_settings') {
      uni.$emit('flowSettingsUpdated', {
        dynamic_flow: userInfo.dynamic_flow,
        circle_flow: userInfo.circle_flow,
        // å…¼å®¹æ—§æ ¼å¼
        dynamicFlow: Boolean(userInfo.dynamic_flow),
        circleFlow: Boolean(userInfo.circle_flow)
      })

      // æ›´æ–°å…¨å±€çŠ¶æ€
      try {
        store.commit('UPDATE_FLOW_SETTINGS', userInfo.flow_settings)
        console.log('å…¨å±€çŠ¶æ€æ›´æ–°å®Œæˆ:', userInfo.flow_settings)
      } catch (error) {
        console.warn('æ›´æ–°å…¨å±€çŠ¶æ€å¤±è´¥:', error.message)
      }
    }
  } catch (e) {
    console.error('æ›´æ–°æœ¬åœ°ç¼“å­˜å¤±è´¥:', e)
  }
}

// è·å–è®¾ç½®é¡¹çš„æ˜¾ç¤ºåç§°
const getSettingDisplayName = (type, isEnabled) => {
  const names = {
    showVisitors: 'è®¿å®¢æŸ¥çœ‹',
    allowSearch: 'æœç´¢å‘ç°',
    showFans: 'ç²‰ä¸æŸ¥çœ‹',
    showFollows: 'å…³æ³¨æŸ¥çœ‹',
    dynamicFlow: 'åŠ¨æ€ç€‘å¸ƒæµ',
    circleFlow: 'åœˆå­ç€‘å¸ƒæµ'
  }

  const status = isEnabled ? 'å¼€å¯' : 'å…³é—­'
  return `${names[type] || type}å·²${status}`
}

// ä¼˜åŒ–çš„åˆ‡æ¢éšç§è®¾ç½®
const switchPrivacy = (type) => {
  if (uiState.privacyLoading) return

  // ä½¿ç”¨é˜²æŠ–å¤„ç†ï¼Œé¿å…å¿«é€Ÿç‚¹å‡»
  debounce(() => {
    uiState.privacyLoading = true

    // ç¡®ä¿å½“å‰å€¼æ˜¯æ•´å‹ï¼Œç„¶ååˆ‡æ¢
    const currentValue = parseInt(privacySettings[type]) || 0
    const newValue = currentValue ? 0 : 1

    // ç«‹å³æ›´æ–°æœ¬åœ°çŠ¶æ€
    privacySettings[type] = newValue

    // ç«‹å³æ›´æ–°æœ¬åœ°ç¼“å­˜
    updateLocalCache('privacy_settings', privacySettings)

    // å‡†å¤‡è¯·æ±‚æ•°æ® - ç¡®ä¿æ‰€æœ‰å­—æ®µéƒ½æ˜¯æ•´å‹
    const requestData = {
      show_fans: parseInt(privacySettings.showFans) || 0,
      show_follows: parseInt(privacySettings.showFollows) || 0,
      show_visitors: parseInt(privacySettings.showVisitors) || 0,
      allow_search: parseInt(privacySettings.allowSearch) || 0,
      show_phone: parseInt(privacySettings.showPhone) || 0
    }

    console.log('æäº¤éšç§è®¾ç½®æ•°æ®:', requestData)

    // é™é»˜æäº¤åˆ°æœåŠ¡å™¨ï¼Œä¸é˜»å¡ç”¨æˆ·ç•Œé¢
    updatePrivacySettings(requestData).then(res => {
      if (res.code === 200) {
        // æ˜¾ç¤ºæˆåŠŸæç¤º
        showTip(getSettingDisplayName(type, privacySettings[type]))

        // æ³¨æ„ï¼šåç«¯ç°åœ¨ç›´æ¥è¿”å›æˆåŠŸçŠ¶æ€ï¼Œä¸è¿”å›æ•°æ®
        // æœ¬åœ°æ•°æ®å·²ç»åœ¨æäº¤å‰æ›´æ–°ï¼Œæ— éœ€å†æ¬¡æ›´æ–°
        console.log('éšç§è®¾ç½®æ›´æ–°æˆåŠŸ')
      }
    }).catch(error => {
      // å¦‚æœæäº¤å¤±è´¥ï¼Œå›æ»šæœ¬åœ°çŠ¶æ€
      privacySettings[type] = privacySettings[type] ? 0 : 1
      updateLocalCache('privacy_settings', privacySettings)
      handleError(error, 'éšç§è®¾ç½®æ›´æ–°')
    }).finally(() => {
      uiState.privacyLoading = false
    })
  }, 300, 'privacy')
}

// ä¼˜åŒ–çš„åˆ‡æ¢ç€‘å¸ƒæµè®¾ç½®
const switchFlow = (type) => {
  if (uiState.flowLoading) return

  // ä½¿ç”¨é˜²æŠ–å¤„ç†ï¼Œé¿å…å¿«é€Ÿç‚¹å‡»
  debounce(() => {
    uiState.flowLoading = true

    // ç¡®ä¿å½“å‰å€¼æ˜¯å¸ƒå°”å€¼ï¼Œç„¶ååˆ‡æ¢
    const currentValue = Boolean(flowSettings[type])
    const newValue = !currentValue

    console.log('ç€‘å¸ƒæµè®¾ç½®å˜æ›´:', type, 'ä»', currentValue, 'åˆ°', newValue)

    // ç«‹å³æ›´æ–°æœ¬åœ°çŠ¶æ€
    flowSettings[type] = newValue

    // ç«‹å³æ›´æ–°æœ¬åœ°ç¼“å­˜
    updateLocalCache('flow_settings', flowSettings)

    // å‡†å¤‡è¯·æ±‚æ•°æ® - è½¬æ¢ä¸ºæ•´å‹
    const requestData = {
      dynamic_flow: flowSettings.dynamicFlow ? 1 : 0,
      circle_flow: flowSettings.circleFlow ? 1 : 0
    }

    console.log('æäº¤ç€‘å¸ƒæµè®¾ç½®æ•°æ®:', requestData)

    // é™é»˜æäº¤åˆ°æœåŠ¡å™¨ï¼Œä¸é˜»å¡ç”¨æˆ·ç•Œé¢
    updateFlowSettings(requestData).then(res => {
      if (res.code === 200) {
        // æ˜¾ç¤ºæˆåŠŸæç¤º
        showTip(getSettingDisplayName(type, flowSettings[type]))

        // æ³¨æ„ï¼šåç«¯ç°åœ¨ç›´æ¥è¿”å›æˆåŠŸçŠ¶æ€ï¼Œä¸è¿”å›æ•°æ®
        // æœ¬åœ°æ•°æ®å·²ç»åœ¨æäº¤å‰æ›´æ–°ï¼Œæ— éœ€å†æ¬¡æ›´æ–°
        console.log('ç€‘å¸ƒæµè®¾ç½®æ›´æ–°æˆåŠŸ')
      }
    }).catch(error => {
      // å¦‚æœæäº¤å¤±è´¥ï¼Œå›æ»šæœ¬åœ°çŠ¶æ€
      flowSettings[type] = !flowSettings[type]
      updateLocalCache('flow_settings', flowSettings)
      handleError(error, 'ç€‘å¸ƒæµè®¾ç½®æ›´æ–°')
    }).finally(() => {
      uiState.flowLoading = false
    })
  }, 300, 'flow')
}

// æ¸…ç†å®šæ—¶å™¨
const clearTimers = () => {
  Object.keys(debounceTimers).forEach(key => {
    if (debounceTimers[key]) {
      clearTimeout(debounceTimers[key])
      debounceTimers[key] = null
    }
  })
}

// ç”Ÿå‘½å‘¨æœŸ - é¡µé¢åŠ è½½æ—¶
onMounted(() => {
  // ç«‹å³ä»ç¼“å­˜åŠ è½½æ•°æ®
  loadFromCache()
})

// ç”Ÿå‘½å‘¨æœŸ - é¡µé¢å¸è½½æ—¶
onUnmounted(() => {
  clearTimers()
})
</script>

<style>
page {
  background: #f8f8f8;
  padding: 0 30rpx;
  box-sizing: border-box;
  overflow-x: hidden; 
}

.title-box {
	padding: 20rpx 0;
	font-size: 40rpx;
	font-weight: bold;
}

.table {
	padding: 30rpx 0;
	color: #999;
	font-size: 24rpx;
	font-weight: 500;
}

.list-box {
  width: 100%;
  border-radius: 24rpx;
  overflow: hidden;
  box-sizing: border-box; 
  margin-bottom: 20rpx;
}

.list-box .list {
	margin: 0;
	padding: 0;
	width: 100%;
	background: #fff!important;
	border-radius: 0;
}


.list-box .list:last-child {
  border-bottom: none;
}

.list-box .list .icon {
  margin: 0 30rpx;
  width: 38rpx;
  height: 38rpx;
}

.list-box .list-item {
  width: calc(100% - 98rpx);
  padding: 30rpx 30rpx 30rpx 0;
  justify-content: space-between;
  border-bottom: 1px solid #f8f8f8;
}

.list-item .title {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.list-item .title .t1 {
  font-size: 24rpx;
  font-weight: 500;
  line-height: 48rpx;
}

.list-item .title .t2 {
  color: #999;
  font-size: 18rpx;
  font-weight: 300;
  line-height: 18rpx;
}

.list-box .list-item image {
  width: 24rpx;
  height: 24rpx;
  transform: rotate(-90deg);
}

.description-box {
  background: #fff;
  border-radius: 24rpx;
  padding: 30rpx;
  margin-bottom: 30rpx;
}

.description-title {
  font-size: 28rpx;
  font-weight: bold;
  margin-bottom: 20rpx;
}

.description-content {
  font-size: 24rpx;
  color: #666;
  line-height: 1.6;
}

.version {
  padding: 60rpx 0;
  flex-direction: column;
  justify-content: center;
}

.version image {
  margin-right: 10rpx;
  width: 20rpx;
  height: 20rpx;
}

.version text {
  color: #999;
  font-size: 18rpx;
}

.tips-box {
  padding: 20rpx 30rpx;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 12rpx;
  justify-content: center;
}

.tips-box .tips-item {
  color: #fff;
  font-size: 28rpx;
  font-weight: 700;
}

.df {
  display: flex;
  align-items: center;
}
</style> 